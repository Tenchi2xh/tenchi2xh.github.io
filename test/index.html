    <!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Hamza Haiken">
		<meta name="description" content="Posts about my free time projects">
		<meta name="generator" content="Hugo 0.15" />
		<title>/* COMMENT BLOCKS: THIS IS A TEST */</title>
		<link rel="shortcut icon" href="http://tenchi.team2xh.net/images/favicon.png">
		<link href='https://fonts.googleapis.com/css?family=Roboto+Mono:400,300,300italic,400italic,700,700italic' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="http://tenchi.team2xh.net/css/style.css">
		<link rel="stylesheet" href="http://tenchi.team2xh.net/css/monosocialiconsfont.css">
		
	</head>

    <body>
       <nav class="main-nav">
    <div class="header-title"><a href="/">/* COMMENT BLOCKS */</a></div>

    <div class="nav-buttons">
	
	
		<a href='http://tenchi.team2xh.net/'> <span class="arrow">← </span>HOME</a>
	

	
		<a href='http://tenchi.team2xh.net/about'>ABOUT</a>
	

	
	</div>
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1 class="post-title">This is a test</h1>
                    <h2 class="headline">February 3, 2016</h2>
                </header>
                <section id="post-body">
                    

<h1 id="aethera-in-dives-et-animalia-recepi:b128b7694e4de962e0088bcb1bcb254f">Aethera in dives et animalia recepi</h1>

<p>Lorem markdownum vertit cetera qui imagine missus; <em>retentis</em> aurea, et. Esse
guttura servatum virginis specieque dividite pondere.
Telum spuma <em>medio</em>; sine iubet oves enim gaudens non altera laudis coeperunt
pavidam ludere in sacrum? Ibi <em>hic novo ab</em> mota iungere perque, et flamine mihi
femina tamen Iuppiter inpositos thalamoque templa primaque stemus. <em>Sub et</em>
caeli praesagia times incognita et pando feruntur satis rutilos caelo. Sed fagus
agere, nec ad scissaque intabescere latus sonat memorantur velamine poterat
superosque ne licet. <a href="http://www.lipsum.com/">Et corpora</a> semper protulit
poteras tremulaeque dumque.</p>
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">sep</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">print</span> <span style="color: #e6db74">&#39;-&#39;</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">70</span>
 
<span style="color: #66d9ef">with</span> <span style="color: #f8f8f2">open(</span><span style="color: #e6db74">&#39;data.txt&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;r&#39;</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">as</span> <span style="color: #f8f8f2">raw_data:</span>
    <span style="color: #f8f8f2">lines</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">map(</span><span style="color: #66d9ef">lambda</span> <span style="color: #f8f8f2">l:</span> <span style="color: #f8f8f2">l</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">split(</span><span style="color: #e6db74">&#39;</span><span style="color: #ae81ff">\t</span><span style="color: #e6db74">&#39;</span><span style="color: #f8f8f2">)[:</span><span style="color: #ae81ff">28</span><span style="color: #f8f8f2">],</span> <span style="color: #f8f8f2">raw_data</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">readlines())</span>

    <span style="color: #f8f8f2">headers</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">lines[</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">]</span>

    <span style="color: #f8f8f2">patients</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{}</span>
    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">line</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">lines[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">:len(lines)</span><span style="color: #f92672">-</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">]:</span>
        <span style="color: #f8f8f2">id</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(line[</span><span style="color: #ae81ff">3</span><span style="color: #f8f8f2">],</span> <span style="color: #f8f8f2">line[</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">],</span> <span style="color: #f8f8f2">line[</span><span style="color: #ae81ff">5</span><span style="color: #f8f8f2">])</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">id</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">patients:</span>
            <span style="color: #f8f8f2">patient</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">patients[id]</span>
            <span style="color: #f8f8f2">patient</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(line)</span>
            <span style="color: #f8f8f2">patients[id]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">patient</span>
        <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">patients[id]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[line]</span>
</pre></div>
</td></tr></table>
<h2 id="celasset-telum-et-claro:b128b7694e4de962e0088bcb1bcb254f">Celasset telum et claro</h2>

<p>Lorem markdownum structa. Erat hoc, huc est trisulcis clipeata excita, ensem
contrahitur dixit. Ventis enim stolidarum, caelo. Fuit quaerenti Minervae novi;
carinam et currus obest; una quod sanguine est herbis, mentes posses, revolat.
Barbaque caelo porrigit exercuit volenti fumida deae umida sine volucri.</p>
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5</pre></div></td><td class="code"><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">box</span> <span style="color: #f92672">*=</span> <span style="color: #a6e22e">netiquette_matrix</span> <span style="color: #f92672">+</span> <span style="color: #ae81ff">3</span> <span style="color: #f92672">/</span> <span style="color: #a6e22e">web</span><span style="color: #f8f8f2">;</span>
<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">error_pppoe</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">99</span><span style="color: #f8f8f2">;</span>
<span style="color: #a6e22e">gopher_interactive</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">disk_ict_paper</span> <span style="color: #f92672">+=</span> <span style="color: #a6e22e">baseband_device</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">258339</span> <span style="color: #f92672">+</span>
        <span style="color: #a6e22e">address_wins</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">internetData</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">shortcutXsltLeaderboard</span><span style="color: #f8f8f2">);</span>
<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">kofficeCyberbullying</span> <span style="color: #f8f8f2">=</span> <span style="color: #a6e22e">mountain</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">trojan_volume_dv</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">cloud</span> <span style="color: #f92672">+</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
</pre></div>
</td></tr></table>
<h2 id="potuit-praesagaque-omnibus-vertice-iuncisque-fugam-se:b128b7694e4de962e0088bcb1bcb254f">Potuit praesagaque omnibus vertice iuncisque fugam se</h2>

<p>Crescitque permansit ore tamen <a href="http://example.com/">tempore</a> cursu: radicibus
motos conplevit in. <em>Amens dixit</em> vel modo Iuppiter memorare colla introitu;
capillo. Illo ferre <em>loricamque</em> cornuaque iter
<a href="http://landyachtz.com/">moderamen</a> mora ut <strong>memorante illis</strong> novum, ardent
figitur spatio.</p>

<p>Aut fidem. Si iuvencae petit, aera stagnum civit, nec, peti, stagnumque. Te
abnuat excussam Orithyiae, foret caput terras postquam portabat hordea puerum
amantibus secuta, nostri tuum corpus habet, Gryneus. Eodem pugnavique cursus
facit scelerato Trachinius haesit coniunctior aura tepente explicat unguibus
conveniant dederat ardet pro plausit dixit <em>fluctus inani</em>! Fraterque <a href="http://www.billmays.net/">quod
que</a> abundet procul cadunt fata aque, exit radiante,
trepidosque longior, vitiataque donec; capi.</p>

<h2 id="iter-uvis-corpora-illa-eris-facis:b128b7694e4de962e0088bcb1bcb254f">Iter uvis corpora illa eris facis</h2>

<p>Famae dubitet, hac et vultum, ora grave fit gemino dis tuaeque honore erit.
Quoque demittit furta ius latratu coniunx umentes rector soceri ego. Criminis at
armis redunco Veneris et poenas <a href="http://news.ycombinator.com/">regnum</a>.</p>

<ul>
<li>Quid et quae adopertaque tibi</li>
<li>Tene tua ignes concita Amor</li>
<li>Fuerat Aetnaeo</li>
</ul>

<h2 id="inde-pater-iphis-dixere-priamusque-me-repertum:b128b7694e4de962e0088bcb1bcb254f">Inde pater Iphis dixere Priamusque me repertum</h2>

<p>Feras proles parte iras parat sinamus dixit. Deorum ceu est ossa harenae
positamque agit: non fuit piaeque, dum tanti, quam? Radere est adspiciunt torus
sit molarem ineunt sacros istae et in.</p>

<blockquote>
<p>Phoebe pectoraque non, ex notas: quando nisi crimen <em>auro faveas illic</em>, nos.
Dumque meosque suis qualia peperit moenia videor sumus. Non cervi observo
corpora arborea, stridula in numina optima, unum se. Silvas sollertia gramineo
facinus summas, promissa non illa et, a! Regia prohibent forma vinctumque
ardet orbis Cecropidis nidis Acrisioniades se et facies rexque!</p>
</blockquote>

<p>Consedit obscuraque molle; post laetaris fractis quique nobis Libye. Promissa
sanguis, ver Telamoniades Irin pectora opaca? Cum cupit tres tellus vacuus
tempore Troiae cui contraxit fistula nemus; lege ligat audita moveri? Nec Icare,
gentes cecidit laceras, dedit nos illa umbra timidum siquis alvo ullus quot
instar taedae. Vulnera nihil adire neque, fui cui vir cui fecit errabat: fretum
nil.</p>

<h1 id="docker-kafka-scraper:b128b7694e4de962e0088bcb1bcb254f">docker-kafka-scraper</h1>

<p>Docker container that scrapes and parses metrics for every Kafka consumer group exposed in Zookeeper</p>

<p>Runs a Python program which exposes a <code>/metrics</code> endpoint through a simple web server. The program will regularly scrape all Kafka consumer groups for every topic and partition for <strong>current offset</strong>, <strong>lag</strong> and <strong>log size</strong>.</p>

<p>The metrics are exposed in the <a href="http://prometheus.io/docs/instrumenting/exposition_formats/">Prometheus Text Format v0.0.4</a>.</p>

<h2 id="exposed-metrics:b128b7694e4de962e0088bcb1bcb254f">Exposed metrics</h2>

<ul>
<li><code>kafka_consumer_offset</code>: current offset of the consumer</li>
<li><code>kafka_consumer_log_size</code>: log size of the consumer</li>
<li><code>kafka_consumer_lag</code>: lag of the consumer (log - offset)</li>
</ul>

<p>Each metric is related via labels to a partition (label <code>pid</code>) and a topic (label <code>topic</code>)</p>

<h2 id="environment-variables:b128b7694e4de962e0088bcb1bcb254f">Environment variables</h2>

<p>The default parameters of the Python scraper can be configured with the following environment variables:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Effect</th>
<th>Default value</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>ZOOKEEPER_HOST</code></td>
<td>Host and port of a Zookeeper instance</td>
<td><code>2181</code></td>
</tr>

<tr>
<td><code>ZOOKEEPER_COMMAND</code></td>
<td>Command used to run the Zookeeper client</td>
<td><code>zkCli.sh</code></td>
</tr>

<tr>
<td><code>KAFKA_COMMAND</code></td>
<td>Command used to run Kafka classes</td>
<td><code>kafka.sh</code></td>
</tr>

<tr>
<td><code>PORT_NUMBER</code></td>
<td>Internal port at which metrics will be exposed</td>
<td><code>5000</code></td>
</tr>

<tr>
<td><code>REFRESH_INTERVAL</code></td>
<td>Interval at which metrics will be scraped (seconds)</td>
<td><code>300</code></td>
</tr>
</tbody>
</table>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
                <a href="https://twitter.com/2xhTenchi">
                        <img class="avatar" src="http://tenchi.team2xh.net/images/hanko.png">
                        <div>
                            <span class="dark">Hamza “Tenchi” Haiken</span>
                            <span>Enthusiastic hacker</span>
                        </div>
                    </a>
                <section id="sharing">
                    <a class="email" href="mailto:tenchi@team2xh.net"><span class="symbol email">&#xe024;</span>Mail</a>
<a class="twitter" href="https://twitter.com/intent/tweet?text=http%3a%2f%2ftenchi.team2xh.net%2ftest%2f - This%20is%20a%20test by @2xhTenchi"><span class="icon-twitter"> Tweet</span></a>

                </section>
            </footer>

            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'commentblocks';
    var disqus_identifier = 'http:\/\/tenchi.team2xh.net\/test\/';
    var disqus_title = 'This is a test';
    var disqus_url = 'http:\/\/tenchi.team2xh.net\/test\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            <ul id="post-list" class="archive readmore">
    <h3>READ MORE</h3>
    
    
        
   
    
        
        <li>
            <a href="http://tenchi.team2xh.net/test/">This is a test<aside class="dates">February 3 2016</aside></a>
        </li>
        
   
</ul>
            <footer id="footer">
    <div id="social">
    <a class="symbol" href="https://www.github.com/Tenchi2xh">&#xe437;</a>
    <a class="symbol" href="https://www.twitter.com/2xhTenchi">&#xe486;</a>
    <a class="symbol" href="http://codegolf.stackexchange.com/users/49508/tenchi2xh">&#xe481;</a>
    <a class="symbol" href="https://www.youtube.com/user/2xhTenchi">&#xe499;</a>
</div>

    <p class="small">
    
        © Copyright 2016 Hamza Haiken
    
    </p>
</footer>

        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://tenchi.team2xh.net/js/main.js"></script>


    </body>
</html>
